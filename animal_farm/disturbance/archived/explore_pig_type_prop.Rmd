---
title: "Calculate disturbance layers for pigs (industrial, intermediate, backyard)"
author: "Juliette"
date: "10/12/2020"
output: html_document
---

We need to know the distribution of breeder and market pigs in each country because the spae required to raise them differs. FAOSTAT provides this information so we will calculate the proportions. 

Conclusion: It seems that globally 10% of pigs are breeder and 90% are market. We will just use these values directly when calculating pigs disturbance. 

## Setup
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(here)
library(countrycode)

source(here("_workflow/common.R"))
source(here("_workflow/common_spatial.R"))
source(here("_spatial/template_raster.R"))

```

## Methods

First we need to calculate the proportion of breeder pigs vs market pigs (FAOSTAT data). We are going to assume that breeder pigs are sows+gilt and that market pigs are the rest.

```{r}

livestock_headcount_raw <- read_csv(file.path(raw, "FAO_data/v2020/FAO_livestock_head_count_2020_09_25.csv")) 

pigs_prop <- livestock_headcount_raw %>% 
  filter(Item %in% c("Swine, breeding", "Swine, market"),
         Year == 2017) %>% 
  mutate(pig_type = case_when(Item == "Swine, breeding" ~ "breeding",
                              Item == "Swine, market" ~ "market")) %>% 
  filter(Area != "China") %>% 
  mutate(Area = ifelse(Area == "Eswatini", "Swaziland", Area),
         Area = ifelse(Area == "Netherlands Antilles (former)", "Bonaire, Sint Eustatius and Saba", Area),
         Area = ifelse(Area == "French Guyana", "French Guiana", Area),
         Area = ifelse(Area == "China, mainland", "China", Area),
         iso3c = countrycode(Area, origin="country.name", destination = "iso3c")) %>% 
  rename(country = Area,
         fao_headcount = Value) %>% 
  select(country, iso3c, pig_type, fao_headcount) %>% 
  group_by(iso3c) %>% 
  mutate(pig_total = sum(fao_headcount, na.rm = TRUE)) %>% 
  ungroup() %>% 
  rowwise() %>% 
  mutate(prop = fao_headcount/pig_total)
```


